{"version":3,"sources":["environment.js","helper.js","Register.js","util.js","Recommender.js","App.js","serviceWorker.js","index.js"],"names":["dotenv","config","appServerUrl","process","APP_SERVER_URL","helper","fixedCategories","category","label","value","original_value","Register","useState","isDone","setIsDone","usernameError","setUsernameError","username","setUsername","gender","setGender","birthDate","setBirthDate","preferPrice","setPreferPrice","preferNearby","setPreferNearby","categories","setCategories","useEffect","sliderMarks","allFixedCategories","map","index","Box","key","marginBottom","style","Slider","min","max","defaultValue","aria-labelledby","step","valueLabelDisplay","onChange","event","handleCategorySlider","marks","color","FormControl","fullWidth","TextField","error","helperText","newUsername","target","errorText","match","axios","get","env","then","res","data","variant","InputLabel","Select","MenuItem","utils","DateFnsUtils","margin","inputVariant","id","format","date","KeyboardButtonProps","labelId","FormControlLabel","control","Checkbox","checked","padding","Button","onClick","alert","errors","push","length","join","newUser","profile","birthdate","preference","price_range","prefer_nearby","post","Cookies","set","window","location","reload","catch","err","console","log","response","LinearProgress","toRad","Math","PI","Transition","React","forwardRef","props","ref","Slide","direction","StyledRating","withStyles","iconFilled","iconHover","Rating","defaultCategories","ProgressWithLabel","display","alignItems","width","mr","minWidth","Typography","Recommender","loadingText","setLoadingText","restaurants","setRestaurants","setLocation","token","setToken","interaction","setInteraction","currentRestaurant","setCurrentRestaurant","ratingValue","setRatingValue","cardOpen","setCardOpen","profileOpen","setProfileOpen","isFinished","setIsFinished","anchorEl","setAnchorEl","price","setPrice","isHelperCardOpen","setIsHelperCardOpen","navigator","geolocation","getCurrentPosition","position","coords","longitude","latitude","users","user","_id","type","coordinates","histories","recommendations","restaurant","finishRecommendation","showNextRestaurant","newCurrentRestaurant","setTimeout","handleNextRestaurant","has_profile","openProfileDialog","progressDone","Grid","container","fontSize","handleCloseProfileDialog","helperDialog","Dialog","open","DialogTitle","DialogContent","DialogActions","profileDialog","name","includes","checkedName","newNames","filter","handleCategories","updateData","put","result","handleReport","message","newInteraction","is_love","is_skip","rating","timestamp","Date","now","reportData","finally","handleCloseReport","reportButton","aria-controls","aria-haspopup","currentTarget","Menu","keepMounted","Boolean","onClose","recommender","overflow","TransitionComponent","Card","cover_url","CardMedia","component","image","title","height","CardContent","marginTop","address","startIcon","url","openGoogleMap","link","flexGrow","name_en","Chip","marginRight","lat1","lon1","lat2","lon2","dLat","dLon","a","sin","cos","atan2","sqrt","distance","toFixed","repeat","likes","CardActions","paddingTop","textAlign","borderColor","justifyContent","getLabelText","precision","icon","justify","remove","size","theme","createMuiTheme","palette","primary","light","main","dark","contrastText","secondary","App","setUser","isRegister","setIsRegister","cookieUsername","login","inputUsername","status","loginForm","ThemeProvider","Container","maxWidth","hostname","ReactDOM","render","StrictMode","document","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.1755f7c5.chunk.js","sourcesContent":["import dotenv from 'dotenv'\n\ndotenv.config()\n\nexport default {\n    appServerUrl: process.env.APP_SERVER_URL ?? 'https://neutron-dot-restaurant-recommender-system.et.r.appspot.com',\n    // appServerUrl: process.env.APP_SERVER_URL ?? 'http://localhost:3001',\n}","const app = 'เว็บไซต์นี้เป็นส่วนหนึ่งในรายวิชา CPE401 COMPUTER ENGINEERING PROJECT หรือ Senior Project ของนักศึกษาคณะวิศวกรรมศาสตร์ ภาควิชาวิศวกรรมคอมพิวเตอร์ มหาวิทยาลัยเทคโนโลยีพระจอมเกล้าธนบุรี ซึ่งได้จัดทำขึ้นเพื่อต้องการเก็บข้อมูลการใช้งานเพื่อนำไปพัฒนาอัลกอรึทึมของระบบ โดยเก็บจากคะแนนความสนใจของผู้ใช้งานต่อร้านค้าที่ระบบได้ทำการแนะนำขึ้น ขอบคุณที่ให้ความร่วมมือค่ะ/ครับ'\n\nconst category = 'ส่วนนี้ให้ผู้ใช้งานให้คะแนนความชอบของประเภทอาหารต่าง ๆ ดังต่อไปนี้ โดยมีคะแนนตั้งแต่ 0 ถึง 10 เมื่อเสร็จแล้วสามารถกด REGISTER เพื่อรับคำแนะนำจากระบบได้เลย'\n\nconst profile = 'ช่วงราคาของร้านอาหารที่ผู้ใช้งานต้องการให้ระบบแนะนำ'\n\nconst location = 'เมื่อกด REGISTER แล้วจะมีการขออนุญาตการเข้าถึงตำแหน่งปัจจุบัน รบกวนกด allow เพื่อให้ระบบได้ทำการแนะนำร้านอาหารที่ใกล้เคียงตัวคุณ'\n\nconst recommender = 'ระบบจะแนะนำร้านอาหารที่ใกล้ตัวคุณมากที่สุดตามความสนใจของผู้ใช้งาน โดยจะให้ผู้ใช้งานให้หัวใจตามความน่าสนใจ น่าไปลองของร้านอาหารนั้น ๆ โดยหัวใจจะมีตั้งแต่ 1 ดวงจนถึง 5 ดวง ผู้ใช้สามารถดูข้อมูลร้านอาหารเพิ่มเติมจาก Facebook ได้โดยกดที่ PAGE และเมื่อครบ 20 ร้านแล้ว สามารถออกจากระบบได้โดยการเลือกที่ LOGOUT หรือจะรับคำแนะนำต่อได้โดยการกดเลือก SUGGEST MORE'\n\nexport const helper = {\n    app,\n    profile,\n    category,\n    location,\n    recommender\n}","import React, { useState, useEffect } from 'react';\nimport { Box, Button, TextField, FormControl, Select, MenuItem, InputLabel, FormControlLabel, Checkbox, LinearProgress, Slider } from '@material-ui/core'\nimport { MuiPickersUtilsProvider, KeyboardDatePicker } from '@material-ui/pickers'\nimport 'date-fns'\nimport DateFnsUtils from '@date-io/date-fns';\nimport env from './environment'\nimport axios from 'axios'\nimport Cookies from 'js-cookie'\nimport { helper } from './helper'\n\nimport './Register.css'\n\n\nconst fixedCategories = [\n  { category: '5f9ab47d7fc4aaabd3eb50ba', label: 'Thai', value: 50, original_value: 50 },\n  { category: '5f9ab47d7fc4aaabd3eb50c9', label: 'Japanese', value: 50, original_value: 50 },\n  { category: '5f9ab4817fc4aaabd3eb5137', label: 'Chinese', value: 50, original_value: 50 },\n  { category: '5f9ab47e7fc4aaabd3eb50ea', label: 'Korean', value: 50, original_value: 50 },\n  { category: '5f9ab47d7fc4aaabd3eb50bb', label: 'Italian', value: 50, original_value: 50 },\n  { category: '5f9ab47e7fc4aaabd3eb50f0', label: 'Fast Food' , value: 50, original_value: 50 },\n  { category: '5f9ab4807fc4aaabd3eb512c', label: 'Buffet', value: 50, original_value: 50 },\n  { category: '5f9ab47e7fc4aaabd3eb50e5', label: 'Seafood', value: 50, original_value: 50 },\n  { category: '5f9ab4807fc4aaabd3eb5117', label: 'Noodle', value: 50, original_value: 50 },\n  { category: '5f9ab4827fc4aaabd3eb5153', label: 'Steakhouse', value: 50, original_value: 50 },\n  { category: '5f9ab4837fc4aaabd3eb5187', label: 'Shabu Shabu', value: 50, original_value: 50 },\n]\n\nexport const Register = () => {\n\n  const [isDone, setIsDone] = useState(false)\n  const [usernameError, setUsernameError] = useState('')\n  const [username, setUsername] = useState('')\n  const [gender, setGender] = useState('')\n  const [birthDate, setBirthDate] = useState(null)\n  const [preferPrice, setPreferPrice] = useState('')\n  const [preferNearby, setPreferNearby] = useState(false)\n  const [categories, setCategories] = useState(fixedCategories)\n  // const [categories, setCategories] = useState([])\n  // const [categoriesList, setCategoriesList] = useState([])\n  // const [categoriesListLength, setCategoriesListLength] = useState(0)\n  // const [commonListLength, setCommonListLength] = useState(0)\n  // const [isFullList, setIsFullList] = useState(false)\n\n  useEffect(() => {\n    // const visibleCategories = []\n    // axios.get(`${env.appServerUrl}/api/categories/search?is_visible=1&is_common=1`).then((res) => {\n    //   res.data.forEach((e) => {\n    //     visibleCategories.push({\n    //       value: e._id,\n    //       label: e.name_en,\n    //     })\n    //   })\n    //   const resCommonListLength = res.data.length\n    //   setCommonListLength(resCommonListLength)\n    //   axios.get(`${env.appServerUrl}/api/categories/search?is_visible=1&is_common=0`).then((res) => {\n    //     res.data.forEach((e) => {\n    //       visibleCategories.push({\n    //         value: e._id,\n    //         label: e.name_en,\n    //       })\n    //     })\n    //     setCategoriesListLength(resCommonListLength)\n    //     setCategoriesList(visibleCategories)\n    //     setIsDone(true)\n    //   })\n    // }).catch((err) => {\n    //   alert(err.response)\n    // })\n    setIsDone(true)\n  }, [])\n\n  // const handleShowFullCategories = (inputIsFullList) => {\n  //   setIsFullList(inputIsFullList)\n  //   if (inputIsFullList) {\n  //     setCategoriesListLength(categoriesList.length)\n  //   } else {\n  //     setCategoriesListLength(commonListLength)\n  //   }\n  // }\n\n  const handleRegister = () => {\n    if (usernameError !== '') {\n      alert(usernameError)\n    } else {\n      const errors = []\n      if (username === '') {\n        errors.push('Username')\n      }\n      if (gender === '') {\n        errors.push('Gender')\n      }\n      if (!birthDate) {\n        errors.push('Birthdate')\n      }\n      if (preferPrice === '') {\n        errors.push('Prefer Price')\n      }\n      if (errors.length > 0) {\n        alert(`Please fill in theres fields: ${errors.join(', ')}`)\n      } else {\n        setIsDone(false)\n        const newUser = {\n          username: username,\n          profile: {\n            gender: gender,\n            birthdate: birthDate,\n            preference: {\n              categories: categories,\n              price_range: preferPrice,\n              prefer_nearby: preferNearby,\n            }\n          }\n        }\n        axios.post(`${env.appServerUrl}/api/users`, newUser).then((res) => {\n          if ('username' in res.data) {\n            Cookies.set('username', res.data.username)\n            window.location.reload()\n          } else {\n            alert('Error creating new user')\n            setIsDone(true)\n          }\n        }).catch((err) => {\n          console.log(err)\n          alert(err.response)\n          setIsDone(true)\n        })\n      }\n    }\n  }\n\n  const handleUsername = (event) => {\n    const letterNumber = /^[0-9a-zA-Z]+$/\n    const newUsername = event.target.value\n    let errorText = ''\n    if (!newUsername.match(letterNumber)) {\n      errorText = 'Cannot contain special charecters.'\n    }\n    if (newUsername === '') {\n      errorText = 'Username cannot be blank.'\n    }\n    if (errorText === '') {\n      axios.get(`${env.appServerUrl}/api/users/has/${newUsername}`).then((res) => {\n        if (res.data) {\n          errorText = 'This name is already existed'\n        } else {\n          errorText = ''\n        }\n        setUsernameError(errorText)\n      })\n    }\n    setUsernameError(errorText)\n    setUsername(newUsername)\n  }\n\n  const handleGender = (event) => {\n    setGender(event.target.value);\n  }\n\n  const handlePreferPrice = (event) => {\n    setPreferPrice(event.target.value);\n  }\n\n  const handleBirthDate = (date) => {\n    setBirthDate(date);\n  }\n\n  const handlePreferNearby = (event) => {\n    setPreferNearby(event.target.checked)\n  }\n\n  const handleCategorySlider = (event, index, value) => {\n    categories[index].value = value * 10\n    categories[index].original_value = value * 10\n    setCategories(categories)\n  }\n\n  // function handleCategories(checkedName) {\n  //   const newNames = categories?.includes(checkedName)\n  //     ? categories?.filter(name => name !== checkedName)\n  //     : [...(categories ?? []), checkedName];\n  //   setCategories(newNames);\n  //   console.log(newNames)\n  //   return newNames;\n  // }\n\n\n\n  const sliderMarks = [\n    { value: 0, label: 'Hate' },\n    { value: 5, label: 'Okay' },\n    { value: 10, label: 'Love' },\n  ]\n\n  // const allCategories = (\n  //   categoriesList.slice(0, categoriesListLength).map(({ value, label }) => (\n  //     <FormControlLabel control={<Checkbox checked={categories.includes(value)} onChange={() => handleCategories(value)} name={value} />} key={value} label={label} />\n  //   ))\n  // )\n\n  const allFixedCategories = (\n    fixedCategories.map(({ category, label, value }, index) => \n      <Box key={category} marginBottom=\"50px\">\n        <p style={{marginBottom: \"0px\"}}><strong>{label}</strong></p>\n        <Slider index={category} min={0} max={10} defaultValue={5} aria-labelledby=\"discrete-slider-custom\" step={1} valueLabelDisplay=\"auto\" onChange={(event, value) => { handleCategorySlider(event, index, value) }} marks={sliderMarks} />\n      </Box>\n    )\n  )\n\n  return (\n    <div>\n      <p style={{color: 'gray'}}>{helper.app}</p>\n      <h3>Registration</h3>\n      { isDone ?\n        <div>\n          <FormControl fullWidth>\n            {/* Username */}\n            <TextField fullWidth error={usernameError !== ''} helperText={usernameError} value={username} onChange={handleUsername} variant=\"outlined\" label=\"New Username\" />\n            <p></p>\n            {/* Gender */}\n            <FormControl variant=\"outlined\">\n              <InputLabel>Gender</InputLabel>\n              <Select variant=\"outlined\" value={gender} onChange={handleGender} label=\"Gender\">\n                <MenuItem value=\"none\"><em>Select gender...</em></MenuItem>\n                <MenuItem value=\"male\">Male</MenuItem>\n                <MenuItem value=\"female\">Female</MenuItem>\n              </Select>\n            </FormControl>\n            {/* Birth Date */}\n            <MuiPickersUtilsProvider utils={DateFnsUtils}>\n              <KeyboardDatePicker margin=\"normal\" inputVariant=\"outlined\" id=\"date-picker-dialog\" label=\"Birth Date\" format=\"dd/MM/yyyy\" value={birthDate} onChange={handleBirthDate} KeyboardButtonProps={{ 'aria-label': 'change date' }} />\n            </MuiPickersUtilsProvider>\n\n            <h4>Profile</h4>\n            <p style={{color: 'gray'}}>{helper.profile}</p>\n            {/* Prefer price */}\n            <FormControl variant=\"outlined\">\n              <InputLabel id=\"demo-simple-select-filled-label\">Price Preference</InputLabel>\n              <Select labelId=\"demo-simple-select-filled-label\" variant=\"outlined\" value={preferPrice} onChange={handlePreferPrice} label=\"Price Preference\">\n                <MenuItem value=\"none\"><em>Select prefer price...</em></MenuItem>\n                <MenuItem value={1}>฿ - ถูกกว่า 100 บาท</MenuItem>\n                <MenuItem value={2}>฿฿ - 100-250 บาท</MenuItem>\n                <MenuItem value={3}>฿฿฿ - 251-500 บาท</MenuItem>\n                <MenuItem value={4}>฿฿฿฿ - 500 บาท+ </MenuItem>\n                <MenuItem value={-1}>No Preference</MenuItem>฿\n              </Select>\n            </FormControl>\n            <p></p>\n            {/* Prefer nearby */}\n            <FormControlLabel control={<Checkbox checked={preferNearby} onChange={handlePreferNearby} />} label=\"Prefer nearby\"/>\n\n            <p></p>\n            <h4>Favorite Categories</h4>\n            {/* <FormControl component=\"fieldset\">\n              <FormGroup>\n                {allCategories}\n              </FormGroup>\n              { !isFullList && <Button onClick={() => handleShowFullCategories(true)} startIcon={<KeyboardArrowDownIcon />}>Show more</Button> }\n              { isFullList && <Button onClick={() => handleShowFullCategories(false)} startIcon={<KeyboardArrowUpIcon />}>Show less</Button> }\n            </FormControl> */}\n            <p style={{color: 'gray'}}>{helper.category}</p>\n            <Box padding=\"20px\">\n              {allFixedCategories}\n            </Box>\n          </FormControl>\n          <p style={{color: 'gray'}}>{helper.location}</p>\n          <Button onClick={handleRegister} variant=\"contained\" color=\"primary\">Register</Button>\n          <p>&nbsp;</p>\n        </div> :\n        <LinearProgress  />\n      }\n    </div>\n  )\n}\n\nexport default Register","export const toRad = (value) => value * Math.PI / 180\n\nexport const distance = (lat1, lon1, lat2, lon2) => {\n    const R = 6371; // Radius of the earth in km\n    const dLat = toRad(lat2-lat1);\n    const dLon = toRad(lon2-lon1);\n    const a = Math.sin(dLat/2) * Math.sin(dLat/2) +\n            Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) * \n            Math.sin(dLon/2) * Math.sin(dLon/2); \n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); \n    return R * c; // Distance in km\n}","import React, { useState, useEffect } from 'react'\nimport { LinearProgress, Box, Typography, Card, CardContent, CardActions, Button, CardMedia, Grid, Chip, Dialog, DialogActions, DialogContent, FormControl, InputLabel, Select, MenuItem, FormControlLabel, Checkbox, Menu, DialogTitle } from '@material-ui/core'\nimport FavoriteIcon from '@material-ui/icons/Favorite'\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle'\nimport StarIcon from '@material-ui/icons/Star'\nimport ThumbUpAltIcon from '@material-ui/icons/ThumbUpAlt'\nimport Cookies from 'js-cookie'\nimport LocationOnIcon from '@material-ui/icons/LocationOn'\nimport LocationOffIcon from '@material-ui/icons/LocationOff'\nimport FacebookIcon from '@material-ui/icons/Facebook'\nimport MapIcon from '@material-ui/icons/Map'\nimport axios from 'axios'\nimport env from './environment'\nimport { distance } from './util'\nimport { withStyles } from '@material-ui/core/styles'\nimport { Rating } from '@material-ui/lab'\nimport { helper } from './helper'\n\nimport Slide from '@material-ui/core/Slide';\n\nimport './Recommender.css'\n\nconst Transition = React.forwardRef(function Transition(props, ref) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\nconst StyledRating = withStyles({\n  iconFilled: {\n    color: '#ff6d75',\n  },\n  iconHover: {\n    color: '#ff3d47',\n  },\n})(Rating)\n\nconst defaultCategories = [\n  { category: '5f9ab47d7fc4aaabd3eb50ba', label: 'Thai', value: 50, original_value: 50 },\n  { category: '5f9ab47e7fc4aaabd3eb50f0', label: 'Fast Food' , value: 50, original_value: 50 },\n  { category: '5f9ab4807fc4aaabd3eb512c', label: 'Buffet', value: 50, original_value: 50 },\n  { category: '5f9ab47d7fc4aaabd3eb50c9', label: 'Japanese', value: 50, original_value: 50 },\n  { category: '5f9ab4817fc4aaabd3eb5137', label: 'Chinese', value: 50, original_value: 50 },\n  { category: '5f9ab47e7fc4aaabd3eb50e5', label: 'Seafood', value: 50, original_value: 50 },\n  { category: '5f9ab4807fc4aaabd3eb5117', label: 'Noodle', value: 50, original_value: 50 },\n  { category: '5f9ab4827fc4aaabd3eb5153', label: 'Steakhouse', value: 50, original_value: 50 },\n  { category: '5f9ab47e7fc4aaabd3eb50ea', label: 'Korean', value: 50, original_value: 50 },\n  { category: '5f9ab47d7fc4aaabd3eb50bb', label: 'Italian', value: 50, original_value: 50 },\n  { category: '5f9ab4837fc4aaabd3eb5187', label: 'Shabu Shabu', value: 50, original_value: 50 },\n]\n\nconst ProgressWithLabel = (props) => (\n  <Box display=\"flex\" alignItems=\"center\">\n    <Box width=\"100%\" mr={1}>\n      <LinearProgress variant=\"determinate\" {...props} />\n    </Box>\n    <Box minWidth={35}>\n      <Typography variant=\"body2\" color=\"textSecondary\">{props.label}</Typography>\n    </Box>\n  </Box>\n)\n\nconst Recommender = (props) => {\n\n  const [loadingText, setLoadingText] = useState('Getting start.')\n  const [restaurants, setRestaurants] = useState(null)\n  const [location, setLocation] = useState(null)\n  const [token, setToken] = useState(null)\n  const [interaction, setInteraction] = useState([])\n  const [currentRestaurant, setCurrentRestaurant] = useState(0)\n  const [ratingValue, setRatingValue] = useState(0)\n  const [cardOpen, setCardOpen] = useState(false)\n  const [profileOpen, setProfileOpen] = useState(false)\n  const [isFinished, setIsFinished] = useState(false)\n  const [anchorEl, setAnchorEl] = useState(null)\n  const [categories, setCategories] = useState([])\n  const [price, setPrice] = useState(-1)\n  const [isHelperCardOpen, setIsHelperCardOpen] = useState(true)\n\n  // useEffect(() => {\n  //   setLoadingText('Getting current location')\n\n  //       axios.post(`${env.appServerUrl}/api/recommendations/init`, {\n  //         users: [props.user._id],\n  //         location: {\n  //           type: 'Point',\n  //           // coordinates: [position.coords.longitude, position.coords.latitude],\n  //           coordinates: [100.496216, 13.649434], // TEST KMUTT\n  //           // coordinates: [100.48707760767, 13.651196796184] // TEST ตำปากแตก\n  //         }\n  //       }).then((res) => {\n  //         console.log(res.data)\n  //         setToken(res.data._id)\n  //         axios.post(`${env.appServerUrl}/api/recommendations/request`, {\n  //           token: res.data._id,\n  //           histories: [],\n  //         }).then((res) => {\n  //           console.log(res.data)\n  //           setRestaurants(res.data.recommendations)\n  //           setLoadingText('')\n  //           setIsFinished(false)\n  //           setCardOpen(true)\n  //         }).catch((error) => {\n  //           alert(error)\n  //         })\n  //       })\n\n  // }, [props.user._id])\n\n  useEffect(() => {\n    setLoadingText('Getting current location')\n    if (!(\"geolocation\" in navigator)) {\n      alert('Geolocation is disabled')\n    } else {\n      navigator.geolocation.getCurrentPosition((position) => {\n        setLocation([position.coords.longitude, position.coords.latitude])\n        console.log(position.coords)\n        setLoadingText('Getting recommendations')\n        axios.post(`${env.appServerUrl}/api/recommendations/init`, {\n          users: [props.user._id],\n          location: {\n            type: 'Point',\n            coordinates: [position.coords.longitude, position.coords.latitude],\n            // coordinates: [100.496216, 13.649434], // TEST KMUTT\n            // coordinates: [100.48707760767, 13.651196796184] // TEST ตำปากแตก\n          }\n        }).then((res) => {\n          console.log(res.data)\n          setToken(res.data._id)\n          axios.post(`${env.appServerUrl}/api/recommendations/request`, {\n            token: res.data._id,\n            histories: [],\n          }).then((res) => {\n            console.log(res.data)\n            setRestaurants(res.data.recommendations)\n            setLoadingText('')\n            setIsFinished(false)\n            setCardOpen(true)\n          }).catch((error) => {\n            alert(error)\n          })\n        }).catch((error) => {\n          alert(error)\n        })\n      })\n    }\n  }, [props.user._id])\n\n  const finishRecommendation = () => {\n    console.log('finish!')\n    console.log(interaction)\n    setIsFinished(true)\n    axios.post(`${env.appServerUrl}/api/recommendations/request`, {\n      token: token,\n      histories: interaction,\n    }).then((res) => {\n      console.log(res.data)\n      setRestaurants(res.data.recommendations)\n    })\n  }\n\n  const showNextRestaurant = () => {\n    const newCurrentRestaurant = currentRestaurant + 1\n    setCurrentRestaurant(newCurrentRestaurant)\n    setRatingValue(0)\n    if (newCurrentRestaurant >= restaurants.length) {\n      finishRecommendation()\n    } else {\n      setTimeout(() => {\n        setCardOpen(true)\n      }, 100)\n    }\n  }\n\n  const handleInteraction = (event, value) => {\n    const newInteraction = {\n      restaurant: restaurants[currentRestaurant]._id,\n      is_love: null,\n      is_skip: false,\n      rating: value - 3,\n      timestamp: Date.now(),\n    }\n    interaction.push(newInteraction)\n    setInteraction(interaction)\n    setRatingValue(value)\n    // setTimeout(() => {\n    //   setCardOpen(false)\n    //   setTimeout(() => {\n    //     if (!restaurants[currentRestaurant].has_profile && value === 5) {\n    //       openProfileDialog()\n    //     } else if (currentRestaurant < restaurants.length - 1) {\n    //       showNextRestaurant()\n    //     } else {\n    //       finishRecommendation()\n    //     }\n    //   }, 100)\n    // }, 100)\n    handleNextRestaurant(ratingValue)\n  }\n\n  const handleNextRestaurant = (value) => {\n    setTimeout(() => {\n      setCardOpen(false)\n      setTimeout(() => {\n        if (!restaurants[currentRestaurant].has_profile && value === 5) {\n          openProfileDialog()\n        } else if (currentRestaurant < restaurants.length - 1) {\n          showNextRestaurant()\n        } else {\n          finishRecommendation()\n        }\n      }, 100)\n    }, 100)\n  }\n\n  const handleMore = () => {\n    setRatingValue(0)\n    setCurrentRestaurant(0)\n    setIsFinished(false)\n    setCardOpen(true)\n  }\n\n  const handleLogout = () => {\n    Cookies.remove('username')\n    window.location.reload()\n  }\n\n  const openGoogleMap = (latitude, longitude) => {\n    const url = `https://www.google.com/maps/search/${latitude},${longitude}`\n    window.open(url, '_blank')\n  }\n\n  const openFacebookLink = (link) => {\n    window.open(link, '_blank')\n  }\n\n  const getDistance = (restaurant) => location ? distance(restaurant.location.coordinates[1], restaurant.location.coordinates[0], location[1], location[0]) : 0\n\n  const progressDone = (\n    <Grid container direction=\"column\" alignItems=\"center\">\n      <CheckCircleIcon style={{ fontSize: 100 }} color=\"secondary\" />\n      <h3>Thank you.</h3>\n      <Button onClick={handleMore} variant=\"contained\" color=\"primary\">Suggest More</Button>\n    </Grid>\n  )\n\n  const openProfileDialog = () => {\n    setProfileOpen(true)\n  }\n\n  const handleCloseProfileDialog = () => {\n    setPrice(-1)\n    setCategories([])\n    setProfileOpen(false)\n    if (currentRestaurant >= restaurants.length - 1) {\n      finishRecommendation()\n    } else {\n      showNextRestaurant()\n    }\n  }\n\n  const handleSubmitProfileDialog = () => {\n    const updateData = {\n      has_profile: categories.length > 0,\n      profile: {\n        price_range: price,\n        categories: categories,\n      }\n    }\n    console.log(updateData)\n    axios.put(`${env.appServerUrl}/api/restaurants/${restaurants[currentRestaurant]._id}`, updateData).then((result) => {\n      console.log(result.data)\n      handleCloseProfileDialog()\n    }).catch((error) => {\n      console.log(error)\n      alert(error)\n      handleCloseProfileDialog()\n    })\n  }\n\n  const handleCategories = (checkedName) => {\n    const newNames = categories?.includes(checkedName)\n      ? categories?.filter(name => name !== checkedName)\n      : [...(categories ?? []), checkedName];\n    setCategories(newNames);\n    console.log(newNames)\n    return newNames;\n  }\n\n  const handlePrice = (event) => {\n    setPrice(event.target.value);\n  }\n\n  const helperDialog = (\n    <>\n      <Dialog open={isHelperCardOpen} aria-labelledby=\"form-dialog-title\">\n        <DialogTitle>คำแนะนำ</DialogTitle>\n        <DialogContent>\n          <p>{helper.recommender}</p>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setIsHelperCardOpen(false)} color=\"secondary\">\n            START\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  )\n\n  const profileDialog = (\n    <>\n    { !isFinished && \n      <Dialog open={profileOpen} aria-labelledby=\"form-dialog-title\">\n        <DialogContent>\n          <h2 style={{margin: '0'}}>{ restaurants && restaurants[currentRestaurant].name }</h2>\n          <p style={{margin: '10px 0 40px', color: 'gray', fontSize: '0.7rem'}}>This restaurant has no profile. If you have ever go to this restaurnat, could you please give us some information about this restaurant. You can skip this by tapping SKIP</p>\n          { restaurants && (restaurants[currentRestaurant].profile.price_range === -1 || restaurants[currentRestaurant].profile.price_range === null || !('price_range' in restaurants[currentRestaurant].profile)) && \n            <FormControl fullWidth variant=\"outlined\">\n              <InputLabel id=\"price-select-filled-label\">Price</InputLabel>\n              <Select labelId=\"price-select-filled-label\" variant=\"outlined\" value={price} onChange={handlePrice} label=\"Price\">\n                <MenuItem value=\"none\"><em>Price...</em></MenuItem>\n                <MenuItem value={1}>฿ - ถูกกว่า 100 บาท</MenuItem>\n                <MenuItem value={2}>฿฿ - 100-250 บาท</MenuItem>\n                <MenuItem value={3}>฿฿฿ - 251-500 บาท</MenuItem>\n                <MenuItem value={4}>฿฿฿฿ - 500 บาท+ </MenuItem>\n                <MenuItem value={-1}>No Data</MenuItem>฿\n              </Select>\n            </FormControl>\n          }\n          <p><strong>Restaurant Types</strong></p>\n          <FormControl>\n            { defaultCategories.map(({ category, label }) => \n              <FormControlLabel fullWidth control={<Checkbox checked={categories.includes(category)} onChange={() => handleCategories(category)} name={category} />} key={category} label={label} />\n            )}\n          </FormControl>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleCloseProfileDialog} color=\"secondary\">\n            SKIP\n          </Button>\n          <Button onClick={handleSubmitProfileDialog} variant=\"contained\" color=\"primary\">\n            SUBMIT\n          </Button>\n        </DialogActions>\n        </Dialog>\n      \n    }\n    </>\n  )\n\n  const handleReport = (message) => {\n    const newInteraction = {\n      restaurant: restaurants[currentRestaurant]._id,\n      is_love: null,\n      is_skip: true,\n      rating: 0,\n      timestamp: Date.now(),\n    }\n    interaction.push(newInteraction)\n    setInteraction(interaction)\n    const reportData = {\n      restaurant: restaurants[currentRestaurant]._id,\n      username: props.user.username,\n      message: message,\n    }\n    axios.post(`${env.appServerUrl}/api/reports`, reportData).then((result) => {\n      console.log(result)\n    }).catch((error) => {\n      alert(error)\n    }).finally(() => {\n      console.log(reportData)\n      handleCloseReport()\n      handleNextRestaurant(0)\n    })\n  }\n\n  const handleClickReport = (event) => {\n    setAnchorEl(event.currentTarget);\n  }\n\n  const handleCloseReport = () => {\n    setAnchorEl(null);\n  }\n\n\n  const reportButton = (\n    <>\n      <Button style={{ marginBottom: '20px' }} aria-controls=\"simple-menu\" aria-haspopup=\"true\" color=\"primary\" onClick={handleClickReport}>\n        Report\n      </Button>\n      <Menu id=\"simple-menu\" anchorEl={anchorEl} keepMounted open={Boolean(anchorEl)} onClose={handleCloseReport}>\n        <MenuItem onClick={() => { handleReport('duplicated') }}>This restaurant is duplicated</MenuItem>\n        <MenuItem onClick={() => { handleReport('closed') }}>This restaurant is permanently closed</MenuItem>\n        <MenuItem onClick={() => { handleReport('non-existed') }}>This restaurant is not existed</MenuItem>\n      </Menu>\n    </>\n  )\n\n  const recommender = (\n    <div>\n      { restaurants && currentRestaurant < restaurants.length && (\n        <div>\n          <ProgressWithLabel variant=\"determinate\" value={((currentRestaurant + 1) / restaurants.length) * 100} label={`${currentRestaurant + 1}/${restaurants.length}`} />\n          <p></p>\n          <Dialog style={{overflow: 'scroll !important'}} fullWidth open={cardOpen} TransitionComponent={Transition} keepMounted >\n            <Card>\n              {restaurants[currentRestaurant].cover_url && <CardMedia component=\"img\" image={restaurants[currentRestaurant].cover_url} title=\"Contemplative Reptile\" height=\"160\" />}\n              <CardContent>\n                <h2 style={{ marginBottom: '0px', marginTop: '5px' }}>{restaurants[currentRestaurant].name ?? ''}</h2>\n                <p style={{ fontSize: '10px', color: 'gray', marginBottom: '0px' }}>{restaurants[currentRestaurant].address}</p>\n                <Box display=\"flex\">\n                  <Button style={{ marginBottom: '20px' }} startIcon={<MapIcon />} color=\"secondary\" onClick={() => { openGoogleMap(restaurants[currentRestaurant].location.coordinates[1], restaurants[currentRestaurant].location.coordinates[0]) }}>\n                    Map\n                  </Button>\n                  <Button style={{ marginBottom: '20px' }} startIcon={<FacebookIcon />} color=\"secondary\" onClick={() => { openFacebookLink(restaurants[currentRestaurant].link) }}>\n                    Page\n                  </Button>\n                  <Box flexGrow=\"1\"></Box>\n                  {reportButton}\n                </Box>\n                <div>\n                  {restaurants[currentRestaurant].profile.categories.map(({ _id, name_en }) => <Chip key={_id} style={{ marginBottom: '5px', marginRight: '10px' }} label={name_en} />)}\n                </div>\n                <div>\n                  <p>\n                    <strong>\n                      {`${(getDistance(restaurants[currentRestaurant])).toFixed(2)} km` ?? ''}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n                      </strong>\n                    {restaurants[currentRestaurant].profile.price_range !== -1 && (\n                      <span>\n                        {'฿'.repeat(restaurants[currentRestaurant].profile.price_range)}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n                      </span>\n                    )}\n                    {restaurants[currentRestaurant].profile.rating && (\n                      <span>\n                        <StarIcon style={{ fontSize: 14 }} /> {restaurants[currentRestaurant].profile.rating}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n                      </span>\n                    )}\n                    {restaurants[currentRestaurant].profile.likes && (\n                      <span>\n                        <ThumbUpAltIcon style={{ fontSize: 14 }} /> {restaurants[currentRestaurant].profile.likes}\n                      </span>\n                    )}\n                  </p>\n                </div>\n              </CardContent>\n              <CardActions style={{paddingTop: '0'}}>\n                <Box component=\"fieldset\" style={{width: '100%', textAlign: 'center'}} width=\"100%\" borderColor=\"transparent\">\n                  <Box display=\"flex\" padding=\"0px 20px\" color=\"gray\" fontSize=\"0.8rem\" justifyContent=\"space-between\">\n                    <Box>Not Interested</Box>\n                    <Box>Interested</Box>\n                  </Box>\n                  <StyledRating onChange={handleInteraction} value={ratingValue} style={{fontSize: '2.5rem'}} name=\"customized-color\" defaultValue={0} getLabelText={(value) => `${value} Heart${value !== 1 ? 's' : ''}`} precision={1} icon={<FavoriteIcon fontSize=\"inherit\" />}/>\n                </Box>\n              </CardActions>\n            </Card>\n          </Dialog>\n        </div>\n      )\n      }\n      { restaurants && isFinished &&\n        <div>\n          {progressDone}\n        </div>\n      }\n    </div>\n  )\n\n  return (\n    <div>\n      {/* {restaurants} */}\n      <Grid container direction=\"row\" justify=\"space-between\">\n        <h3>Hi, {props.user.username ?? ''}</h3>\n        <Button onClick={handleLogout} size=\"small\" color=\"secondary\">Logout</Button>\n      </Grid>\n      { location ?\n        <div style={{ color: 'gray' }}>\n          <LocationOnIcon style={{ fontSize: '14px' }} /> {location[1].toFixed(6)}, {location[0].toFixed(6)}\n        </div> :\n        <LocationOffIcon style={{ fontSize: '14px' }} />\n      }\n\n      <p></p>\n      { isHelperCardOpen && <>{helperDialog}</> }\n      { loadingText ?\n        <div>\n          <p>{loadingText}</p>\n          <LinearProgress />\n        </div> :\n        <div>\n          { !isHelperCardOpen &&\n            <>\n              {recommender}\n              {profileDialog}\n            </>\n          }\n        </div>\n      }\n      <p></p>\n    </div>\n  )\n}\n\nexport default Recommender","import React, { useState, useEffect } from 'react';\nimport { Container, Button, TextField, FormControl, LinearProgress } from '@material-ui/core'\nimport Register from './Register'\nimport Recommender from './Recommender'\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles'\nimport Cookies from 'js-cookie'\nimport axios from 'axios'\nimport env from './environment'\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      light: '#ffa040',\n      main: '#ff6f00',\n      dark: '#c43e00',\n      contrastText: '#fff',\n    },\n    secondary: {\n      light: '#63a4ff',\n      main: '#1976d2',\n      dark: '#004ba0',\n      contrastText: '#fff',\n    },\n  },\n})\n\nexport const App = () => {\n\n  const [isDone, setIsDone] = useState(false)\n  const [user, setUser] = useState(null)\n  const [username, setUsername] = useState('')\n  const [isRegister, setIsRegister] = useState(true)\n\n  useEffect(() => {\n    const cookieUsername = Cookies.get('username')\n    if (cookieUsername) {\n      login(cookieUsername)\n    } else {\n      setIsDone(true)\n    }\n  }, [])\n\n  const login = (inputUsername) => {\n    axios.post(`${env.appServerUrl}/api/auth`, {\n      username: inputUsername\n    }).then(res => {\n      const data = res.data\n      if (!data.status) {\n        alert(data.error)\n        setIsDone(true)\n      } else {\n        Cookies.set('username', data.data.username)\n        setUser(data.data)\n        setIsDone(true)\n      }\n    }).catch((err) => {\n      alert(err)\n    })\n  }\n\n  const handleLogin = () => {\n    setIsDone(false)\n    console.log(env)\n    login(username)\n  }\n\n  const handleUsername = (event) => {\n    setUsername(event.target.value)\n  }\n\n  const loginForm = (\n    <div>\n      <h3>Please login</h3>\n      <FormControl fullWidth>\n        <TextField onChange={handleUsername} variant=\"outlined\" label=\"Username\" />\n      </FormControl>\n      <Button onClick={handleLogin} style={{marginTop: '10px'}} variant=\"contained\" color=\"primary\">Login</Button>\n\n      <h4>or</h4>\n      <Button onClick={() => setIsRegister(true)} variant=\"contained\" color=\"primary\">Register</Button>\n    </div>\n  )\n\n  return (\n    <div>\n      \n      <ThemeProvider theme={theme}>\n        <Container component=\"main\" maxWidth=\"xs\">\n          <h1>Resteraunt Recommender</h1>\n          { isDone ?\n            <div>\n              { (!isRegister && !user) && loginForm }\n              { (isRegister && !user) && (\n                <div>\n                  <Button onClick={() => setIsRegister(false)} color=\"primary\">Login</Button>\n                  <Register />\n                </div>\n              )}\n              { user && <Recommender user={user} name={user.username} /> }\n            </div> :\n            <LinearProgress  />\n          }\n        </Container>\n      </ThemeProvider>\n    </div>\n  )\n}\n//npx browserslist --update-db\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}